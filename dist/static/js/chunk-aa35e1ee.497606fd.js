(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-aa35e1ee"],{"7e18":function(t,e,o){"use strict";o.r(e),o("ac6a");var a={ds:[{id:"vatAllInfoQueryDs",queryUrl:"/app/invoice/reportRefVatInfoQuery",submitUrl:"",autoCreate:!1,autoQuery:!0}],data:function(){var t=this;return{ds:this.$getDs("vatAllInfoQueryDs"),promptList:[{prompt:"货物、或应税劳务、服务名称",key:"goodsOrTaxableService"},{prompt:"规格型号",key:"specifications"},{prompt:"单位",key:"unit"},{prompt:"数量",key:"quantity"},{prompt:"单价",key:"unitPrice"},{prompt:"不含税金额",key:"withoutTaxAmount"},{prompt:"税率",key:"taxRate"},{prompt:"税额",key:"taxAmount"}],chooseFlag:!0,buttons:[{class:"button-agree",text:"确认关联",callback:function(){t.confirm()}}],allSelected:!1,fuzzy_query:"",hasFooter:!0,showFlag:!0,checked:"",headInfo:this.$store.getters.headInfo,options:{pullDownRefresh:{threshold:60,stop:40,txt:"更新成功"},pullUpLoad:{threshold:60,txt:"已加载"},scrollbar:{fade:!0,interactive:!1}}}},methods:{selectRecord:function(t,e){var o=e.get("lines");o.forEach(function(e){e.checked=t}),e.set("lines",o)},toggle:function(t){t.showFlag||this.$set(t,"showFlag",!1),t.showFlag=!t.showFlag},confirm:function(){var t=this,e=this.ds.getRecordSelected(),o=[];e.forEach(function(e){var a=Object.create({});(a=JSON.parse(JSON.stringify(e))).documentId=t.headInfo.expReportHeaderId,a.invoiceAmount=e.amount,a.documentLineId=t.$route.params.expReportLineId,a.expReportLineId=t.$route.params.expReportLineId,e.lines&&e.lines.length>0&&e.lines.forEach(function(t){t.checked&&(a.lineId=t.invoiceLineId,a.invoiceAmount=t.invoiceAmount,a.taxAmount=t.taxAmount)}),a.lines=void 0,o.push(a)});var a={key:o};this.$post({url:"/app/invoice/saveReportMoreInvoice",para:a}).then(function(e){t.$router.back()},function(t){})},selectLineData:function(t,e){t.length>0?e.select():e.unselect()}},created:function(){},components:{auTable:o("0e39").a}},s=(o("e16d"),o("2877")),n=Object(s.a)(a,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("au-view",{attrs:{fuzzy_query:t.fuzzy_query,hasFooter:t.hasFooter,bindTarget:t.ds.id,options:t.options}},[o("div",{attrs:{slot:"center"},slot:"center"},[t._v("请选择需要关联的发票")]),o("div",{staticClass:"margin-bottom-line",attrs:{slot:"noScroll"},slot:"noScroll"},[o("au-search",{attrs:{placeholder:"搜索"},model:{value:t.fuzzy_query,callback:function(e){t.fuzzy_query=e},expression:"fuzzy_query"}})],1),o("div",[o("au-data-scope",{attrs:{bindTarget:t.ds.id}},[o("au-rows",{scopedSlots:t._u([{key:"default",fn:function(e){var a=e.record,s=e.data;return[o("au-checkbox-item",{attrs:{record:a,isShow:t.hasFooter},on:{select:t.selectRecord}},[o("div",{staticClass:"invoice-ref"},[o("div",{staticClass:"row color-999 font-common"},[o("div",{staticClass:"col invoice-number-color"},[t._v("\n                    NO."+t._s(s.invoiceNumber)+"\n                  ")]),o("div",{staticClass:"col text-align-right"},[t._v("\n                    "+t._s(t._f("dateString")(s.invoiceDate))+"\n                  ")])]),o("div",{staticClass:"color-333 font-title font-pingfang-bold"},[t._v("\n                  "+t._s(s.invoiceTypeName)+"\n                ")]),o("div",[t._v("发票代码:"+t._s(s.invoiceCode))]),o("div",[t._v("购买方:"+t._s(s.purchaserName))]),o("div",[t._v("销售方:"+t._s(s.sellerName))]),o("div",{staticClass:"row"},[o("div",{staticClass:"col font-common gray-class"},[t._v("\n                    "+t._s(s.authenticationStatusName)+"\n                  ")]),o("div",{staticClass:"col text-align-right"},[o("span",{staticClass:"gray-class"},[t._v("CNY")]),o("span",{},[t._v(t._s(t._f("money")(s.amount)))])])]),s.lines.length>0?o("div",[o("div",{staticClass:"vertical-center justify-content-center",on:{click:function(e){return e.stopPropagation(),t.toggle(s)}}},[o("span",{staticClass:"col dots-line margin-right"}),o("span",{staticClass:"expand-font"},[t._v("\n                      "+t._s(s.showFlag?"收起":"展开")+"\n                    ")]),o("span",{staticClass:"col dots-line margin-left"})]),s.showFlag?o("div",[o("div",[o("au-table",{attrs:{chooseFlag:t.chooseFlag,promptList:t.promptList,dataList:s.lines,parentRecord:a},on:{select:t.selectLineData}})],1)]):t._e()]):t._e()])])]}}])})],1)],1),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("au-footer-bar",{attrs:{buttons:t.buttons}})],1)])],1)},[],!1,null,"019b7b5d",null);e.default=n.exports},d850:function(t,e,o){},e16d:function(t,e,o){"use strict";var a=o("d850");o.n(a).a}}]);