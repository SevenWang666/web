(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f413556"],{"2a91":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("au-view",{ref:"view",staticClass:"view-container",attrs:{hasHeader:e.hasHeader,bottomSize:e.bottomSize,hasFooter:e.hasFooter}},[s("div",{attrs:{slot:"center"},slot:"center"},[e._v("关联申请单")]),s("div",{attrs:{slot:"right"},slot:"right"},[s("div",{directives:[{name:"show",rawName:"v-show",value:0!=e.datas.length,expression:"datas.length != 0"}],on:{click:e.batchApprove}},[e._v("\n      "+e._s(e.patchFlag?e.$t("EX_BI_LIST.BATCHRELATE"):e.$t("APP_LIST.CANCEL"))+"\n    ")])]),s("div",{staticClass:"wrapper"},[0==e.datas.length?s("div",{staticClass:"err"},[e._v("\n      数据为空！\n    ")]):e._e(),e._l(e.datas,function(t,a){return s("div",{key:a,staticClass:"out",on:{click:function(s){return e.clickCard(t.expRequisitionLineId)}}},[e.hasFooter?s("div",{staticClass:"cir"},[s("i",{staticClass:"select-all-icon iconfont",class:{"hec-icon-batch-approval-selected":e.checkSelect(t.expRequisitionLineId),"hec-icon-batch-approval-unselected":!e.checkSelect(t.expRequisitionLineId)}})]):e._e(),s("div",{staticClass:"card"},[s("div",{staticClass:"info-1"},[s("div",{staticClass:"invoice-code"},[e._v(e._s(t.expRequisitionNumber))])]),s("div",{staticClass:"type-name"},[e._v(e._s(t.reqMoExpenseTypeName))]),s("div",{staticClass:"info-2"},[s("div",{staticClass:"amount"},[e._v("\n            "+e._s(t.paymentCurrencyCode+" "+t.paymentAmount)+"\n          ")])])])])})],2),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("div",{staticClass:"select-container"},[s("au-footer-bar",{attrs:{buttons:e.buttons}},[s("i",{staticClass:"select-all-icon iconfont",class:{"hec-icon-batch-approval-selected":e.allSelected,"hec-icon-batch-approval-unselected":!e.allSelected},on:{click:e.selectAll}}),s("div",{staticClass:"select-all-desc"},[e._v(e._s(e.$t("COMMON.SELECTALL")))])])],1)])])},i=[],r=(s("a481"),s("ac4d"),s("8a81"),s("ac6a"),s("6762"),s("2fdb"),s("96cf"),s("3b8d")),n={created:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,s,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this,this.$route.query.relationModeCode,t=this.$route.query.moExpPoolTypeId,s=this.$route.query.busRefId,e.next=6,this.$post({url:"/app/expense-pool/expensePoolRefReqLovQuery",para:{moExpPoolTypeId:t,busRefId:s}});case 6:a=e.sent,this.datas=a.rows;case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),data:function(){return{hasHeader:!0,hasFooter:!1,patchFlag:!0,bottomSize:0,fuzzy_query:"",datas:[],allSelected:!1,buttons:[{class:"button-relate",text:this.$t("COMMON.RELATE"),callback:this.relate}],selectIds:[]}},methods:{batchApprove:function(){this.selectIds.length=0,this.allSelected&&(this.allSelected=!1),this.patchFlag=!this.patchFlag,this.patchFlag?(this.bottomSize=0,this.hasFooter=!1):(this.bottomSize=50,this.hasFooter=!0)},clickCard:function(e){if(this.hasFooter){this.allSelected&&(this.allSelected=!1);var t=this.selectIds.indexOf(e);-1==t?this.selectIds.push(e):this.selectIds.splice(t,1),this.selectIds.length==this.datas.length&&(this.allSelected=!0)}else this.selectIds.push(e),this.relate()},checkSelect:function(e){return this.selectIds.includes(e)},selectAll:function(){if(this.allSelected=!this.allSelected,this.selectIds.length=0,this.allSelected){var e=!0,t=!1,s=void 0;try{for(var a,i=this.datas[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var r=a.value,n=r.expRequisitionLineId;this.selectIds.push(n)}}catch(l){t=!0,s=l}finally{try{e||null==i.return||i.return()}finally{if(t)throw s}}}},relate:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,s,a,i,r,n,l,o,c,h,u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:for(t=this.$route.query.busRefId+"",s=parseInt(this.$route.query.poolId),a="insert",this,i=[],r=!0,n=!1,l=void 0,e.prev=8,o=this.selectIds[Symbol.iterator]();!(r=(c=o.next()).done);r=!0)h=c.value,i.push({poolId:s,status:a,expRequisitionHeaderId:h+"",refId:t});e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](8),n=!0,l=e.t0;case 16:e.prev=16,e.prev=17,r||null==o.return||o.return();case 19:if(e.prev=19,!n){e.next=22;break}throw l;case 22:return e.finish(19);case 23:return e.finish(16);case 24:return console.log(i),e.next=27,this.$post({url:"/app/expense-pool/expensePoolRefReqSubmit",para:{lines:i}});case 27:u=e.sent,console.log(u),this.$router.replace({name:"expense_bill_operator",query:{pool_id:this.$route.query.poolId}});case 30:case"end":return e.stop()}},e,this,[[8,12,16,24],[17,,19,23]])}));function t(){return e.apply(this,arguments)}return t}()}},l=n,o=(s("d0b4"),s("2877")),c=Object(o["a"])(l,a,i,!1,null,"0b682341",null);t["default"]=c.exports},d0b4:function(e,t,s){"use strict";var a=s("fcb6"),i=s.n(a);i.a},fcb6:function(e,t,s){}}]);