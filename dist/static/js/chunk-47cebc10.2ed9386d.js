(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-47cebc10"],{"0e1c":function(t,e,i){"use strict";var a=i("7a61"),n=i.n(a);n.a},"0f23":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("au-view",{staticClass:"view-container background-bills",attrs:{hasFooter:t.hasFooter}},[i("div",{attrs:{slot:"center"},slot:"center"},[t._v("添加附件")]),i("div",{staticClass:"content-container"},[i("div",{staticClass:"upload-style"},[i("au-upload",{ref:"upload",attrs:{action:t.action,"simultaneous-uploads":1},on:{"file-success":t.fileSuccess},model:{value:t.files,callback:function(e){t.files=e},expression:"files"}},[t._l(t.images,function(e,a){return i("div",{key:e.fileUrl,staticClass:"img-style"},[i("img",{attrs:{src:e.fileUrl,width:"80",height:"80"},on:{click:function(e){return t.preview(a)}}}),i("div",{staticClass:"wrong-pos",on:{click:function(i){return t.deleteImg(e,a)}}},[i("i",{staticClass:"cubeic-wrong"})])])}),t._l(t.files,function(e,a){return i("au-upload-file",{key:a,staticClass:"img-style",attrs:{file:e},on:{click:function(i){return t.retry(e)}}})}),i("au-upload-btn",{staticClass:"img-style"})],2)],1)]),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("au-footer-bar",{attrs:{buttons:t.buttons}})],1)])},n=[],s=(i("8e6e"),i("456d"),i("bd86"));i("ac6a");function r(t,e){var i=Object.keys(t);return Object.getOwnPropertySymbols&&i.push.apply(i,Object.getOwnPropertySymbols(t)),e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i}function o(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(i,!0).forEach(function(e){Object(s["a"])(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}var c={data:function(){return{files:[],hasFooter:!0,images:[],initialIndex:0,tableName:this.$route.query.tableName,id:this.$route.query.id,action:{target:"".concat("http://hzero-test-80.natapp1.cc:48080/hssp","/v1/file/uploadFiles?access_token=").concat(window.sessionStorage.getItem("token"),"&from=hzero&tableName=").concat(this.$route.query.tableName,"&organizationId=0&id=").concat(this.$route.query.id),timeout:1500,prop:"base64Value",withCredentials:!0,data:function(t){return{file:t.file}},progressInterval:200,headers:function(t){window.sessionStorage.getItem("token");var e={};return e}},buttons:[{class:"button-reset",text:"上一步",callback:this.back},{class:"button-agree",text:"完成创建/修改",callback:this.nextStep}]}},methods:{back:function(){this.$router.back()},retry:function(t){this.$refs.upload.retry(t)},nextStep:function(){var t="";"EXP_REPORT_HEADER"==this.tableName?t="/exp-recheck":"EXP_REQUISITION_HEADER"==this.tableName&&(t="/apply-recheck/".concat(this.id)),this.$router.push({path:t,query:"EXP_REQUISITION_HEADER"!=this.tableName?{headId:this.id}:null})},preview:function(t){var e=this;this.initialIndex=t;var i=[];this.images.forEach(function(t){i.push(t.url)});var a={$props:{imgs:i,initialIndex:"initialIndex",loop:!0},$events:{change:function(t){e.initialIndex=t}}};this.$createImagePreview(o({},a)).show()},deleteImg:function(t,e){var i=this;console.log(t),this.$post({url:"/v1/file/removeFile",para:{lines:[t],urlPara:"&organizationId=0&tableName=".concat(this.tableName,"&id=").concat(this.id)}}).then(function(t){i.images.splice(e,1)},function(t){})},fileSuccess:function(){this.getAttachment()},getAttachment:function(){var t=this,e={urlPara:"organizationId=0&size=1&page=10&tableName=".concat(this.tableName,"&id=").concat(this.id,"&showDelete=true")};this.$post({url:"/v1/file/queryFiles",para:e}).then(function(e){t.images=e.rows},function(t){})}},created:function(){this.getAttachment()}},l=c,u=(i("0e1c"),i("2877")),f=Object(u["a"])(l,a,n,!1,null,"65a4863b",null);e["default"]=f.exports},"7a61":function(t,e,i){}}]);