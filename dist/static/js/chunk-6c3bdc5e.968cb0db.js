(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6c3bdc5e"],{"36f1":function(t,e,a){"use strict";var s={props:{open:{type:Boolean,default:!1}},data:function(){return{showFlag:this.show}},methods:{toggle:function(){this.showFlag=!this.showFlag}}},i=(a("5e90"),a("2877")),o=Object(i.a)(s,function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("au-collapse",{attrs:{isReverse:"",collapseStyle:{backgroundColor:"transparent"}}},[e("div",{staticClass:"show-more background-bills",attrs:{slot:"title"},slot:"title"},[e("div",{staticClass:"vertical-center justify-content-center padding-tb-10",on:{click:this.toggle}},[e("span",{staticClass:"col gray-line"}),e("span",{staticClass:"font-common color-gray"},[this._v("\n          "+this._s(this.showFlag?"收起":"展开")+"\n        ")]),e("span",{staticClass:"col gray-line"})])]),e("div",{staticClass:"transition-style",attrs:{slot:"content"},slot:"content"},[this._t("default")],2)])],1)},[],!1,null,"261e739c",null);e.a=o.exports},"52cb":function(t,e,a){},"5e90":function(t,e,a){"use strict";var s=a("b6be");a.n(s).a},"7f2f":function(t,e,a){"use strict";var s=a("aa06");a.n(s).a},"8a34":function(t,e,a){"use strict";var s={data:function(){return{showLineFlag:this.showFlag}},methods:{toggle:function(t){this.showLineFlag=t}},props:{showFlag:{type:Boolean,default:!1},source:{type:Object,default:function(){return{}}},title:{type:String,default:""}}},i=(a("7f2f"),a("2877")),o=Object(i.a)(s,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("au-collapse",{on:{toggle:t.toggle}},[a("div",{attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"line-desc-s"},[t._v("\n          "+t._s(t.title)+"\n          "),a("div",{staticClass:"action-style",class:{"rotate-90":t.showLineFlag,"rotate-reverse":!t.showLineFlag}},[a("i",{staticClass:"iconfont hec-icon-more icon-font-s"})])])]),a("div",{attrs:{slot:"content"},slot:"content"},[a("au-table",{attrs:{promptList:t.source.fields,dataList:t.source.data}})],1)])],1)])},[],!1,null,"74c52f54",null);e.a=o.exports},aa06:function(t,e,a){},b6be:function(t,e,a){},dd46:function(t,e,a){"use strict";var s=a("52cb");a.n(s).a},e201:function(t,e,a){"use strict";a.r(e),a("96cf");var s,i=a("3b8d"),o=(a("28a5"),[{id:"recheckHeadDs",queryUrl:"/app/exp/requisition-header/getReqAllInfo",submitUrl:"/hssp4dev/modules/app/exp/app_exp_report_doc_line_save.svc",deleteUrl:"",autoCreate:!0,autoQuery:!1,fields:[{name:"company_name",prompt:"公司",required:!0,readonly:!0,editor_type:"Readonly"},{name:"unit_name",prompt:"部门",required:!0,readonly:!0,editor_type:"Readonly"},{name:"employee_name",prompt:"经办人",required:!0,readonly:!0,editor_type:"Readonly"},{name:"report_date",prompt:"经办日期",required:!0,readonly:!0,editor_type:"Readonly"},{name:"desc",prompt:"备注",required:!0,readonly:!0,editor_type:"Textarea"}]}]),n=a("36f1"),r=a("8a34"),l={ds:o,data:function(){var t=this;return{processList:[{prompt:"新建",type:"GENERATE"},{prompt:"提交",type:"SUBMITTED"},{prompt:"已审批",type:"COMPLETELY_APPROVED"},{prompt:"审核完成",type:"FINISHED"},{prompt:"部分付款",type:"PAID"},{prompt:"已付款",type:"COMPLETELY_PAID "}],operationStatus:{},dataList:[],headData:{},btns:[{action:"delete",text:"删除",color:"#ff3a32"}],lines:{},headFields:[],hasFooter:!1,readonly:!0,images:[],buttons:[{class:"button-agree",text:"提交",callback:this.submit}],others:{callback:function(){t.$createDialog({content:"是否返回到列表,若要返回上一步骤请选择返回修改",type:"confirm",onConfirm:function(){t.back()}}).show()}},ds:{},headId:this.$route.params.headId}},computed:{record:function(){var t=this.ds.getCurrentRecord();return t}},methods:{goProcessDetail:function(){this.$router.push({name:"process",params:{document_type:"EXP_REQUISITION",document_id:this.headData.expRequisitionHeaderId}})},back:function(){this.$store.commit("setData",{name:"forcedJump",value:"apply-list"}),this.$router.push({name:"apply-list"})},deleteLine:function(){},loan:function(){this.readonly||this.$router.push({name:"plan-payment",params:{}})},expLine:function(){this.readonly||this.$router.push({name:"add-general-exp",params:{}})},modify:function(){this.lines.STANDARD_PMT?this.images?this.goAttachment():this.loan():this.expLine()},goAttachment:function(){this.readonly||this.$router.push({name:"attachment",query:{tableName:"EXP_REQUISITION_HEADER",id:this.headId}})},getAttachment:function(){var t=this,e={urlPara:"organizationId=0&size=1&page=10&tableName=EXP_REQUISITION_HEADER&id=".concat(this.headId,"&showDelete=true")},a="http://hzero-test-80.natapp1.cc:48080/hssp".split("/");a.length>2&&(a[0],a[2]);var s=window.sessionStorage.getItem("token");this.$post({url:"/v1/file/queryFiles",para:e}).then(function(e){e.rows&&(t.images=e.rows.map(function(t){return{url:"".concat("http://hzero-test-80.natapp1.cc:48080/hssp","/v1/file/downloadFile?access_token=").concat(s,"&organizationId=0&isPreview=true&url=").concat(t.fileUrl)}}))},function(t){})},submitReport:(s=Object(i.a)(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$post({url:"/app/exp/report-header/submitReport",para:e});case 3:return a=t.sent,t.abrupt("return",a);case 7:t.prev=7,t.t0=t.catch(0);case 10:case"end":return t.stop()}},t,this,[[0,7]])})),function(t){return s.apply(this,arguments)}),submit:function(){var t=this,e={expReportHeaderId:this.record.get("expReportHeaderId"),bgtIgnoreWarningFlag:"N",vatIgnoreDateFlag:"N",vatIgnoreAccEntityFlag:"N",rmbIgnoreWarningFlag:"N"};this.submitReport(e).then(function(a){if(a.rows[0]){var s=a.rows[0].resultType;"ALLOWED"===s?t.$createDialog({content:"是否再次提交",type:"confirm",onConfirm:function(){e[a.rows[0].flag]="Y",t.submitReport(e).then(function(e){t.$store.commit("isRefresh",!0),t.back()},function(t){})}}).show():"BLOCK"===s?t.$createDialog({content:a.rows[0].message,type:"alert"}).show():"SUCCESS"===s&&(t.$store.commit("isRefresh",!0),t.back())}},function(t){})},configTable:function(t,e){if(this.lines[e]=t[e],this.lines[e]){var a=this.lines[e].fields.columns.map(function(t){return{key:t.column,prompt:t.prompt?t.prompt:"无描述字段"}});this.$set(this.lines[e],"fields",a)}},goHead:function(){this.readonly||this.$router.push({name:"head-form",params:{parameter:{}}})}},created:function(){var t=this;this.ds=this.$getDs("recheckHeadDs"),this.headId=this.$route.params.headId,this.ds.query({expRequisitionHeaderId:this.headId}).then(function(e){var a=t.ds.getAllRecordData();Array.isArray(a)&&(t.headData=a[0],t.operationStatus={type:t.headData.reportStatus,name:t.headData.reportStatusName},t.configTable(t.headData,"STANDARD"),t.configTable(t.headData,"TRAVEL_SUBSIDY_LINES"),t.configTable(t.headData,"TRAVEL_STAY_LINES"),t.configTable(t.headData,"TRAVEL_LINES"),t.configTable(t.headData,"STANDARD_PMT"),t.headFields=t.headData.fields.columns,t.$store.commit("headInfo",a[0]),t.readonly=!1)},function(t){}),this.getAttachment()},components:{collapse:n.a,lineTable:r.a}},c=(a("dd46"),a("2877")),d=Object(c.a)(l,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("au-view",{ref:"view",staticClass:"view-container background-bills",attrs:{hasFooter:t.hasFooter,others:t.others}},[a("div",{attrs:{slot:"center"},slot:"center"},[t._v("单据详情")]),a("div",{staticClass:"content-container"},[a("div",[a("div",{staticClass:"row add-prompt"},[a("div",{staticClass:"col"},[t._v(t._s(t.headData.expRequisitionNumber))]),a("div",{staticClass:"col text-align-right  color-gray",on:{click:t.goHead}},[a("i",{staticClass:"iconfont hec-icon-more font-12"})])]),a("collapse",{attrs:{open:""}},[a("div",{staticClass:"border-lrb-radius"},t._l(t.headFields,function(e,s){return a("div",{key:s},[a("div",{staticClass:"au-item-style paddinig-lr-15"},[a("div",{staticClass:"col col-30 gray-color"},[t._v(t._s(e.prompt))]),a("div",{staticClass:"col col-70 color-666 text-align-right"},[t._v("\n                  "+t._s(t.headData[e.column])+"\n                ")])])])}),0)])],1),a("div",{staticClass:"white-color common-border-radius"},[a("div",{staticClass:"row add-prompt"},[a("div",{staticClass:"col"},[t._v("单据进度")]),a("div",{staticClass:"col text-align-right font-12 color-gray",on:{click:t.goProcessDetail}},[a("span",{staticClass:"font-common color-7d88aa"},[t._v("进度详情")]),a("i",{staticClass:"iconfont hec-icon-more font-12"})])]),a("div",[a("au-steps",{staticClass:"paddding-lr-20",attrs:{processList:t.processList,operationStatus:t.operationStatus}})],1)]),a("div",{staticClass:"margin-top-line white-color common-border-radius"},[a("div",{staticClass:"row add-prompt"},[a("div",{staticClass:"col"},[t._v("费用信息")]),a("div",{staticClass:"col text-align-right color-gray",on:{click:t.expLine}},[a("i",{staticClass:"iconfont hec-icon-more font-12"})])]),t.lines.STANDARD?a("div",{staticClass:"tabel-padding-style"},[a("line-table",{attrs:{source:t.lines.STANDARD,title:"标准行"}})],1):t._e(),t.lines.TRAVEL_SUBSIDY_LINES?a("div",{staticClass:"tabel-padding-style"},[a("line-table",{attrs:{source:t.lines.TRAVEL_SUBSIDY_LINES,title:"补贴行"}})],1):t._e(),t.lines.TRAVEL_STAY_LINES?a("div",{staticClass:"tabel-padding-style"},[a("line-table",{attrs:{source:t.lines.TRAVEL_STAY_LINES,title:"住宿行"}})],1):t._e(),t.lines.TRAVEL_LINES?a("div",{staticClass:"tabel-padding-style"},[a("line-table",{attrs:{source:t.lines.TRAVEL_LINES,title:"行程行"}})],1):t._e()]),a("div",{staticClass:"margin-top-line white-color common-border-radius"},[a("div",{staticClass:"row add-prompt"},[a("div",{staticClass:"col"},[t._v("计划付款行信息")]),a("div",{staticClass:"col text-align-right  color-gray",on:{click:t.loan}},[a("i",{staticClass:"iconfont hec-icon-more font-12"})])]),a("div",[t.lines.STANDARD_PMT?a("div",{staticClass:"tabel-padding-style"},[a("au-table",{attrs:{promptList:t.lines.STANDARD_PMT.fields,dataList:t.lines.STANDARD_PMT.data}})],1):a("div",{staticClass:"text-align-center padding-style font-12 color-gray"},[t._v("\n            该单据暂无借款信息\n          ")])])]),a("div",{staticClass:"margin-top-line white-color common-border-radius"},[a("div",{staticClass:"row add-prompt"},[a("div",{staticClass:"col"},[t._v("附件信息")]),a("div",{staticClass:"col text-align-right color-gray",on:{click:t.goAttachment}},[a("i",{staticClass:"iconfont hec-icon-more font-12"})])]),t.images.length>0?a("div",{staticClass:"margin-a"},[a("div",{staticClass:"img-style"},[t._l(t.images,function(t,e){return a("div",{key:e,staticClass:"margin-rb-10 "},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.url,expression:"item.url"}],attrs:{width:"75",height:"75"}})])}),a("div")],2)]):a("div",{staticClass:"text-align-center padding-style font-12 color-gray"},[t._v("\n          该单据暂无附件\n        ")])]),a("div",{staticClass:"height-20"})]),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("au-footer-bar",{attrs:{buttons:t.buttons}})],1)])],1)},[],!1,null,"bb782d86",null);e.default=d.exports}}]);