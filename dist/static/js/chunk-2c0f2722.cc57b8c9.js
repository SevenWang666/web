(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2c0f2722"],{"22e7":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("au-view",{ref:"view",attrs:{options:t.options,bindTarget:t.bindTarget,fuzzy_query:t.fuzzy_query,queryKey:"queryCondition"}},[a("div",{attrs:{slot:"center"},slot:"center"},[t._v(t._s(t.$t("IN_GA_LIST.INVOICEGATHERING")))]),a("div",{attrs:{slot:"right"},slot:"right"},[a("div",{on:{click:function(e){return t.filtrate()}}},[a("img",{attrs:{src:i("4769"),alt:""}})])]),a("div",{staticClass:"margin-bottom-10",attrs:{slot:"noScroll"},slot:"noScroll"},[a("au-search",{attrs:{placeholder:"搜索对应发票"},model:{value:t.fuzzy_query,callback:function(e){t.fuzzy_query=e},expression:"fuzzy_query"}})],1),a("au-swipe",[a("au-data-scope",{attrs:{bindTarget:t.bindTarget}},[a("au-rows",{scopedSlots:t._u([{key:"default",fn:function(e){return[a("au-swipe-item",{ref:"swipeItem",attrs:{btns:t.btns,index:e.index,autoShrink:t.autoShrink},on:{"btn-click":t.onBtnClick}},[a("au-template",{attrs:{data:t.getData(e.record),search:t.fuzzy_query,status:t.getStatusClass(e.record)},on:{click:function(i){return t.goInvoiceDetail(e.record)}}})],1)]}}])})],1)],1)],1),a("i",{staticClass:"cubeic-add icon-position",on:{click:t.showPopFormBottom}})],1)},o=[],n=(i("28a5"),i("75fc")),s={id:"app_invoice_infor_query",queryUrl:"/app/invoice/appInvoiceListQuery",deleteUrl:"/app/invoice/appInvoiceCerDel",autoCreate:!1,autoQuery:!0},c={id:"invoiceStatusQuery",queryUrl:"/app/vat/mo-invoice-type/invoiceStatusQuery",autoCreate:!1,autoQuery:!1},r=[s,c],l=i("d97e"),u={mixins:[l["a"]],name:"invoice-list",ds:Object(n["a"])(r),data:function(){return{autoShrink:!0,ds:this.$getDs("app_invoice_infor_query"),options:{pullDownRefresh:{threshold:60,stop:40,txt:"更新成功"},pullUpLoad:{threshold:60,txt:"已加载"}},btns:[{action:"delete",text:"删除",color:"#ff3a32"}],bindTarget:"app_invoice_infor_query",fuzzy_query:"",typeVal:"",typeName:"请选择发票类型",statusVal:"",statusName:"请选择发票状态",filterObj:{},typeOptions:[],styleOptions:[],statusArray:[],statusOptions:[]}},activated:function(){1==sessionStorage.getItem("newInvioce")&&(this.$refs.view.query(),sessionStorage.setItem("newInvioce","-1"))},computed:{},created:function(){var t=this;this.$post({url:"/app/code/INV_CERTIFICATE_STATUS",para:{page:1}}).then(function(e){t.statusArray=e.rows;for(var i=0;i<t.statusArray.length;i++)t.statusOptions.push({text:t.statusArray[i].meaning,value:t.statusArray[i].value})},function(e){t.isSuccess=!1}),this.$post({url:"/app/invoice/appInvoiceTypeQuery",para:{page:1}}).then(function(e){t.typeOptions=e.rows;for(var i=0;i<t.typeOptions.length;i++)t.styleOptions.push({text:t.typeOptions[i].meaning,value:t.typeOptions[i].value})},function(e){t.isSuccess=!1})},methods:{getStatusClass:function(t){return t.get("certificateStatus")},pickerStatus:function(){this.pickers||(this.pickers=this.$createPicker({title:"发票状态",data:[this.statusOptions],onSelect:this.selectStatus,onCancel:function(){console.log("cancel")}})),this.pickers.show()},selectStatus:function(t,e,i){this.statusVal=t,this.statusName=i},pickerType:function(){this.picker||(this.picker=this.$createPicker({title:"发票类型",data:[this.styleOptions],onSelect:this.selectType,onCancel:function(){console.log("cancel")}})),this.picker.show()},selectType:function(t,e,i){this.typeVal=t,this.typeName=i},filtrate:function(){var t=this;this.$createElement;this.$createDialog({type:"prompt",showClose:!0,confirmBtn:{text:"确定",active:!0,disabled:!1,href:"javascript:;"},cancelBtn:{text:"重置",active:!1,disabled:!1,href:"javascript:;"},onConfirm:function(e){t.typeVal instanceof Array&&(t.typeVal=t.typeVal.join("")),t.statusVal instanceof Array&&(t.statusVal=t.statusVal.join("")),t.ds.setParameters({invoiceType:t.typeVal,certificateStatus:t.statusVal}),t.$refs.view.query()},onCancel:function(){console.log("重置"),t.statusVal="",t.statusName="请选择发票状态",t.typeVal="",t.typeName="请选择发票类型"}},function(e){return[e("div",{class:{"cube-dialog-title-def":!0},slot:"title"}),e("div",{slot:"content"},[e("div",{class:"popup-body",style:"margin-bottom: -0.7rem;font-size: 0.38rem;margin-top: 0.7rem;"},[e("div",{class:"row"},[e("div",{class:"col col-30 col-left-title"},[e("span",["发票类型"])," "]),e("div",{class:"col col-60 text-align-right col-right-content",style:"overflow: hidden;text-overflow: hidden;white-space: nowrap"},[e("div",{on:{click:t.pickerType}},[" ",t.typeName])," "]),e("div",{class:"col col-10 text-align-left"},[e("i",{class:"cubeic-arrow"})," "])]),e("div",{class:"row"},[e("div",{class:"col col-30 col-left-title"},[e("span",["发票状态"])," "]),e("div",{class:"col col-60 text-align-right col-right-content"},[e("div",{on:{click:t.pickerStatus}},[t.statusName])," "]),e("div",{class:"col col-10 text-align-left"},[e("i",{class:"cubeic-arrow"})," "])])])])]}).show()},getData:function(t){return{head:[{value:"NO.".concat(t.get("invoiceNumber"))},{value:t.get("invoiceDate").split(" ")[0]}],line:[{value:t.get("invoiceTypeName"),color:["line-imp"]},{value:"发票代码：".concat(t.get("invoiceCode")),color:["font-pingfang-bold"]},{value:"购买方：".concat(null==t.get("purchaserName")?" ":t.get("purchaserName")),color:["font-pingfang-bold"]},{value:"销售方：".concat(null==t.get("sellerName")?" ":t.get("sellerName")),color:["font-pingfang-bold"]}],bottom:[{value:t.get("certificateStatusName")},{value:t.get("withoutTaxAmount")}]}},onBtnClick:function(t,e){var i=this;"delete"===t.action&&this.$createDialog({type:"confirm",content:"是否删除该单据",onConfirm:function(){var t=Object.create(null),a=i.ds,o=a.getRecordFromIndex(e);t.certificationId=o.get("certificationId"),i.ds.delete(t).then(function(t){a.deleteRecordIndex(e)},function(t){})},onCancel:function(){console.log("取消")}}).show()},goInvoiceDetail:function(t){this.$router.push({name:"invoice-detail",params:{certificationId:t.get("certificationId"),invoiceId:t.get("invoiceId")}})},toCamResult:function(){this.$router.push({name:"cam-result"})}}},p=u,d=(i("6dca"),i("2877")),f=Object(d["a"])(p,a,o,!1,null,"228e0c07",null);e["default"]=f.exports},"24b3":function(t,e,i){},4769:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAB2ElEQVQ4T2NkoBAwwvT/////HgMDwz8GBoa/WGhsYmC1yAY8YmBgkEV30N5DpxkuXbvL8OnLVwZpSVEGL2crBikJEbgyZAOeMjAwSMFkZixYD2YmRfkwsLGxwjVcuX6XYfn63QwlWdEMggK8DMgGvGBgYBAHqazrnM1QkhXFwMfLjTOEps1by+DpbIliwCsGBgZRkM1RwW54NcNM7Zi0CMWAtwwMDEIgAzISAsFqqttmgP2NDN5/+MwQH+HFICMpBhZG9sL7PYdOC9hZGMD9/PzlW4Zrt+4zONuawM1o7J7LUF+ajDUQP/XPWMFbmBGBYiMoPJrKU8FiG3ccZvB2sWJgYWHGasDXxp65XPUlCNNBqr58/c5w4uwVBhc7U4bGnrkM6PLIXvg+Z+kmjpRoP4yQ333gFIOrgxlDU+88hrriJBR5ZAN+PXvxhvXd+48MOprKWKOPkAF/GBgYmEEh31qVgdWAC1duMxjoqCIS1Y17KLHwHyTz7sMnhhXrdjNkJQXjzWa///xh6JqyBGLA////maCZCKzp/sNnDCs37mGoyIvDasiVG/cYNm4/xFBdmAA3AJTYf6Gr7p+xguHDp88M+tqqDHw83AwPn75guPfgKUNkoCs8nAC/7Mw0XmZfnQAAAABJRU5ErkJggg=="},"6dca":function(t,e,i){"use strict";var a=i("24b3"),o=i.n(a);o.a}}]);