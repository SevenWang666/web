(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4688794c"],{"32fe":function(e,t,i){},"36f1":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("au-collapse",{attrs:{isReverse:"",collapseStyle:{backgroundColor:"transparent"}}},[i("div",{staticClass:"show-more background-bills",attrs:{slot:"title"},slot:"title"},[i("div",{staticClass:"vertical-center justify-content-center padding-tb-10",on:{click:e.toggle}},[i("span",{staticClass:"col gray-line"}),i("span",{staticClass:"font-common color-gray"},[e._v("\n          "+e._s(e.showFlag?"收起":"展开")+"\n        ")]),i("span",{staticClass:"col gray-line"})])]),i("div",{staticClass:"transition-style",attrs:{slot:"content"},slot:"content"},[e._t("default")],2)])],1)},o=[],a={props:{open:{type:Boolean,default:!1}},data:function(){return{showFlag:this.show}},methods:{toggle:function(){this.showFlag=!this.showFlag}}},s=a,r=(i("5e90"),i("2877")),c=Object(r["a"])(s,n,o,!1,null,"261e739c",null);t["a"]=c.exports},"40b5":function(e,t,i){"use strict";var n=i("32fe"),o=i.n(n);o.a},"5e90":function(e,t,i){"use strict";var n=i("b6be"),o=i.n(n);o.a},7665:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("au-view",{staticClass:"view-container background-bills",attrs:{others:e.others,hasFooter:e.hasFooter}},[i("div",{attrs:{slot:"center"},slot:"center"},[e._v("费用详情")]),i("div",{staticClass:"content-container common-margin-size"},[i("div",{staticClass:"line-title vertical-center"},[e._v("头信息")]),i("collapse",e._l(e.fields,function(t,n){return i("div",{key:n,staticClass:"au-item-style border-none paddinig-lr-15"},[i("div",{staticClass:"col col-30 gray-color"},[e._v(e._s(t.prompt))]),i("div",{staticClass:"col col-70 color-666 text-align-right"},[e._v("\n            "+e._s(e.headInfo[t.key])+"\n          ")])])}),0),i("au-common",{attrs:{id:"lineDetailDs"},on:{select:e.select,cancel:e.cancel,confirm:e.confirm,blur:e.blur,change:e.change,input:e.input}}),i("au-data-scope",{attrs:{bindTarget:e.lineDetailDs.id}},[i("au-rows",{scopedSlots:e._u([{key:"default",fn:function(t){t.record;var n=t.data;return[n.requisitionLine?i("div",{staticClass:"margin-top-line common-border-radius white-color"},[i("div",{staticClass:"line-title vertical-center"},[e._v("申请单关联")]),i("div",{staticClass:"padding-lr padding-bt-5"},[i("div",[i("div",{staticClass:" white-color margin-top-line"},[i("div",{staticClass:"row head-style"},[i("div",{staticClass:" col col-50"},[e._v("\n                        "+e._s(n.requisitionLine.expRequisitionNumber)+"\n                      ")]),i("div",{staticClass:"col col-50 text-align-right"},[e._v("\n                        行号: "+e._s(n.requisitionLine.lineNumber)+"\n                      ")])]),i("div",{staticClass:"content-style"},[e._v("\n                      "+e._s(n.requisitionLine.desc?n.requisitionLine.desc:"暂无备注")+"\n                    ")]),i("div",{staticClass:"row footer-line"},[i("div",{staticClass:"col col-50"},[i("span",[e._v("\n                          "+e._s(n.requisitionLine.moExpReqTypeName)+"\n                        ")])]),i("div",{staticClass:"text-align-right col col-50"},[i("span",{staticClass:"footer-left"},[e._v("\n                          "+e._s(n.requisitionLine.currencyCode)+"\n                        ")]),i("span",{staticClass:"footer-right"},[e._v("\n                          "+e._s(n.requisitionLine.paymentAmoun)+"\n                        ")])])])])])])]):e._e()]}}])})],1),i("div",{staticClass:"margin-top-line common-border-radius  white-color"},[i("div",{staticClass:"line-title vertical-center"},[e._v("发票信息")]),i("au-swipe",e._l(e.invoices,function(t,n){return i("div",{key:n},[i("au-swipe-item",{ref:"swipeItem",refInFor:!0,attrs:{btns:e.btns,index:n,autoShrink:""},on:{"btn-click":e.onBtnClick}},[i("div",{staticClass:" border-bottom-1px padding-lr"},[i("rel-invoice",{attrs:{data:t}})],1)])],1)}),0),i("div",{staticClass:"item"},[i("div",{staticClass:"add-expense-choose"},[i("div",{staticClass:"add-exp-add",on:{click:function(t){return e.addInvoice()}}},[e._v("\n              新增发票导入\n              "),i("i",{staticClass:"iconfont hec-icon-addExpense-exit"})])])])],1),i("div",{staticClass:"height-20"})],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("au-footer-bar",{attrs:{buttons:e.buttons}})],1)])],1)},o=[],a=(i("c5f6"),i("7f7f"),{id:"lineDetailDs",queryUrl:"/app/exp/report-line/reportLineQuery",submitUrl:"/app/exp/report-header/saveLines",autoCreate:!1,autoQuery:!1}),s={id:"transportationDs",queryUrl:"/app/code/TRANSPORTATION/",relevance_ds:["seatClassDs"],autoCreate:!1,autoQuery:!0},r={id:"seatClassDs",queryUrl:"/app/exp/report-line/getSeatClass",autoCreate:!1,bindTarget:"lineDetailDs",autoQuery:!1},c=i("36f1"),l=i("f8ff"),d=i("ad0f"),p={name:"exp-detail",data:function(){var e=this;return{invoices:{},expReportLineId:"",headInfo:this.$store.getters.headInfo,hasFooter:!0,queryFlag:!1,para:"",paraHead:"",lineDetailDs:{},buttons:[{class:"button-reset",text:"保存",callback:this.save},{class:"button-agree",text:"保存并新建",callback:this.saveAndNew}],fields:[{prompt:"公司",key:"companyName"},{prompt:"部门",key:"unitName"},{prompt:"责任中心",key:"respCenterName"},{prompt:"费用发生日期",key:"reportDate"}],list:[{key:"apple",name:"wang"}],others:{callback:function(){e.back()}},btns:[{action:"delete",text:"删除",color:"#ff3a32"}]}},computed:{isConfigExp:function(){var e=this.lineDetailDs.getFields(),t=!!e.moExpenseItemName;return t},record:function(){var e=this.lineDetailDs.getCurrentRecord();return e}},activated:function(){this.queryInvoice()},methods:{queryInvoice:function(){var e=this;this.$post({url:"/app/exp/report-line/getReportMoreInvoice",para:{expReportLineId:this.expReportLineId}}).then(function(t){e.invoices=t.rows},function(e){})},onBtnClick:function(e,t){var i=this;"delete"===e.action&&this.$createDialog({type:"confirm",content:"确认删除吗？",onConfirm:function(){var e=i.invoices[t];e.documentId=i.headInfo.expReportHeaderId,e.documentLineId=i.expReportLineId,i.$post({url:"/app/invoice/deleteReportMoreInvoice",para:e}).then(function(e){i.invoices.splice(t,1)},function(e){})}}).show()},back:function(){this.$route.query.expRequisitionLineId||this.$route.query.poolId?(this.$store.commit("setData",{name:"forcedJump",value:"add-general-exp"}),this.$router.push({name:"add-general-exp"})):this.$router.go(-1)},confirm:function(e,t,i){"moExpenseItemName"===t.name&&(e.set("moExpenseItemName",i.expType.items.description),e.set("moExpenseItemId",i.expType.items.moExpenseItemId),e.set("moExpenseTypeId",i.expType.moExpenseTypeId),e.set("amount",i.amount),e.set("businessPrice",Number(i.amount)),e.set("businessAmount",Number(i.amount)*e.get("primaryQuantity")),e.set("paymentAmount",Number(i.amount)*e.get("primaryQuantity")))},select:function(e,t){if("transportationName"===t.name){var i=t.record,n=i.getField("seatClassName");n.setReadonly(!1),n.set("")}},cancel:function(){console.log("abc"),console.log("cancel arguments:"+arguments.length)},input:function(){console.log("input arguments:"+arguments.length)},blur:function(){console.log("blur arguments:"+arguments.length)},change:function(e,t,i){if("primaryQuantity"===t.name){var n=t.record,o=n.get("businessPrice")?n.get("businessPrice"):1,a=n.get("primaryQuantity")*o;n.set("paymentAmount",a)}},save:function(){var e=this;this.lineDetailDs.submit().then(function(t){e.back()},function(e){console.log(e)})},saveAndNew:function(){var e=this;this.lineDetailDs.submit().then(function(t){var i={expReportHeaderId:e.headInfo.expReportHeaderId};e.$createToast({type:"txt",txt:"保存成功"}).show(),e.lineDetailDs.query(i).then(function(t){var i=e.lineDetailDs.getCurrentRecord();i.addData(e.para)}),e.expReportLineId=void 0,e.queryConfigInfo(),e.queryInvoice()},function(e){console.log(e)})},queryConfigInfo:function(){var e=this;this.$post({url:"/app/exp/report-line/appGetReportLineConfig",para:this.para}).then(function(t){if(t.rows[0]){var i=Object(d["a"])(t.rows[0]);e.lineDetailDs.addFields(i)}},function(e){})},queryData:function(){},addInvoice:function(){var e=this,t=this.lineDetailDs.getCurrentRecord().getData();t.expReportHeaderId=this.headInfo.expReportHeaderId,this.lineDetailDs.submit().then(function(t){if(t.rows[0]){var i=e.lineDetailDs.getCurrentRecord(),n=t.rows[0].objectVersionNumber;i.set("objectVersionNumber",n),i.set("expReportLineId",t.rows[0].expReportLineId),e.expReportLineId=t.rows[0].expReportLineId,e.$router.push({name:"ref-invoice",params:{expReportLineId:t.rows[0].expReportLineId}})}},function(e){console.log(e)})}},created:function(){var e=this,t=this.headInfo;this.paraHead={expReportHeaderId:this.headInfo.expReportHeaderId,expReportLineId:this.$route.query.expReportLineId,moExpReportTypeId:t.moExpReportTypeId,poolId:this.$route.query.poolId,expRequisitionDistId:this.$route.query.expRequisitionDistId,expRequisitionLineId:this.$route.query.expRequisitionLineId,reportPageElementCode:this.headInfo.reportPageElementCode},this.para={moExpReportTypeId:t.moExpReportTypeId,companyId:t.companyId,bgtEntityId:t.bgtEntityId,accEntityId:t.accEntityId,reportPageElementCode:this.headInfo.reportPageElementCode,pageElementCode:this.headInfo.reportPageElementCode,expReportHeaderId:this.headInfo.expReportHeaderId,employeeId:t.employeeId,paymentCurrencyCode:t.paymentCurrencyCode},this.lineDetailDs=this.$createDs(a,this),this.expReportLineId=this.$route.query.expReportLineId,this.lineDetailDs.query(this.paraHead).then(function(t){var i=e.lineDetailDs.getCurrentRecord();i.addData(e.para),i.set("expRequisitionDistId",e.paraHead.expRequisitionDistId)}),this.queryConfigInfo(),"TRAVEL_LINES"===this.headInfo.reportPageElementCode&&(this.$createDs(r,this),this.$createDs(s,this))},components:{collapse:c["a"],relInvoice:l["a"]}},u=p,f=(i("40b5"),i("2877")),m=Object(f["a"])(u,n,o,!1,null,"144ce088",null);t["default"]=m.exports},8697:function(e,t,i){"use strict";var n=i("8f0f"),o=i.n(n);o.a},"8f0f":function(e,t,i){},ad0f:function(e,t,i){"use strict";i.d(t,"a",function(){return o});i("ac6a");var n=i("75fc");function o(e){var t={commonList:[],descList:[]},i={commonList:[],descList:[]},o={commonList:[],descList:[]};if(Array.isArray(e.columns)&&e.columns.length>0){var s=e.columns;t=a(s)}if(Array.isArray(e.dimensions)&&e.dimensions.length>0){var r=e.dimensions;i=a(r)}if(Array.isArray(e.objects)&&e.objects.length>0){var c=e.objects;o=a(c)}if(Array.isArray(e.vatInvoiceConfig)&&e.vatInvoiceConfig.length>0){var l=e.vatInvoiceConfig;t=a(l)}return[].concat(Object(n["a"])(t.commonList),Object(n["a"])(i.commonList),Object(n["a"])(o.commonList),Object(n["a"])(t.descList),Object(n["a"])(i.descList),Object(n["a"])(o.descList))}function a(e){var t={commonList:[],descList:[]};return e.forEach(function(e){var i=e.lovConfig,n={name:e.column,key:e.keyField,prompt:e.prompt,placeholder:e.placeholder,required:!!e.required,readonly:!!e.readonly,editor_type:e.editor,length:"",showFlag:!0,mapping:Array.isArray(e.mapping)?e.mapping:[e.mapping],queryDs:e.codeConfig?e.codeConfig.queryDs:"",display_field:e.codeConfig?e.codeConfig.displayField:"",lovConfig:i?{queryUrl:i.lovCode?"/app/lov/".concat(i.lovCode):e.queryUrl,autoCreate:!1,para:s(i.values),paraFromDs:i.parameters,autoQuery:!1}:"",others:e.lovConfig?Object.assign({},e.lovConfig.others,{queryUrl:e.queryUrl}):""};"Textarea"!=n.editor_type?t.commonList.push(n):"Textarea"===n.editor_type&&t.descList.push(n)}),t}function s(e){if(e){var t=Object.create(null);return Array.isArray(e)&&e.forEach(function(e){Object.assign(t,e)}),t}}},b6be:function(e,t,i){},f8ff:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"row font-header"},[i("div",{staticClass:"col col-50"},[e._v("NO."+e._s(e.data.invoiceCode))]),i("div",{staticClass:"col col-50 text-align-right font-color-8E"},[e._v("\n      "+e._s(e.data.invoiceDate)+"\n    ")])]),i("div",{staticClass:"invoice-type-s"},[e._v("发票代码："+e._s(e.data.invoiceNumber))]),i("div",{},[e._v("购买方："+e._s(e.data.purchaserName))]),i("div",[e._v("销售方："+e._s(e.data.sellerName))]),i("div",{staticClass:"row"},[i("div",{staticClass:"col col-50 invoice-verification"},[e._v("\n      "+e._s(e.data.invoiceStatusName)+"\n    ")]),i("div",{staticClass:"col col-50 text-align-right currency-style"},[i("span",{staticClass:"currency-7A8597"},[e._v("CNY")]),e._v("\n      "+e._s(e._f("money")(e.data.businessAmount))+"\n    ")])])])},o=[],a={props:{data:{type:Object,default:function(){return{}}}}},s=a,r=(i("8697"),i("2877")),c=Object(r["a"])(s,n,o,!1,null,"58656621",null);t["a"]=c.exports}}]);