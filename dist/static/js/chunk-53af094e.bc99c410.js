(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-53af094e"],{3229:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("au-view",{ref:"view",staticClass:"view-container",attrs:{hasHeader:t.hasHeader,bottomSize:t.bottomSize,hasFooter:t.hasFooter,options:t.options,bindTarget:t.bindTarget,fuzzy_query:t.fuzzy_query,queryKey:"fuzzyValue"}},[a("div",{attrs:{slot:"center"},slot:"center"},[t._v(t._s(t.$t("APP_LIST.APPROVECENTER")))]),a("div",{attrs:{slot:"right"},slot:"right"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.todoFlag,expression:"todoFlag"}],on:{click:t.batchApprove}},[t._v("\n      "+t._s(t.patchFlag?t.$t("APP_LIST.APPROVEINBATCHES"):t.$t("APP_LIST.CANCEL"))+"\n    ")])]),a("div",{attrs:{slot:"noScroll"},slot:"noScroll"},[a("au-search",{attrs:{placeholder:t.search},model:{value:t.fuzzy_query,callback:function(e){t.fuzzy_query=e},expression:"fuzzy_query"}}),a("au-tab-bar",{attrs:{showSlider:""},on:{change:t.selected},model:{value:t.selectedLabel,callback:function(e){t.selectedLabel=e},expression:"selectedLabel"}},t._l(t.list,function(e){return a("au-tab",{key:e.desc,attrs:{label:t.$t(e.desc),item:e}})}),1)],1),a("au-data-scope",{attrs:{bindTarget:t.bindTarget}},[a("au-rows",{scopedSlots:t._u([{key:"default",fn:function(e){return[a("au-checkbox-item",{attrs:{isShow:t.hasFooter,record:e.record}},[a("au-template",{attrs:{data:t.getTemplateData(e.record),record:e.record,search:t.fuzzy_query,status:t.getStatusClass(e.record)},on:{click:function(a){return t.goBillDetail(e.record)}}})],1)]}}])})],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"select-container"},[a("au-footer-bar",{attrs:{buttons:t.buttons}},[a("i",{staticClass:"select-all-icon iconfont",class:{"hec-icon-batch-approval-selected":t.allSelected,"hec-icon-batch-approval-unselected":!t.allSelected},on:{click:t.selectAll}}),a("div",{staticClass:"select-all-desc"},[t._v(t._s(t.$t("COMMON.SELECTALL")))])])],1)])],1)},s=[],l=a("75fc"),r={id:"actionDs",queryUrl:"",submitUrl:"/app/wfl/todo/approve",autoCreate:!0,autoQuery:!1,fields:[{name:"commentText",prompt:"审批意见",placeholder:"请填写审批意见",required:!0,readonly:!1,editor_type:"Textarea",length:"",key:"commentText"}]},c=[r],i={name:"approve",ds:[].concat(Object(l["a"])(c),[{id:"wfl_todo_list_query",queryUrl:"/app/wfl/Instance/queryToApprove",autoCreate:!1,autoQuery:!0},{id:"wfl_done_list_query",queryUrl:"/app/wfl/Instance/queryAlreadyApprove",autoCreate:!1,autoQuery:!1}]),data:function(){return{selectedLabel:this.$t("APP_LIST.PROCESSING"),search:this.$t("COMMON.SEARCH"),hasHeader:!0,patchFlag:!0,fuzzy_query:"",todoFlag:!0,hasFooter:!1,bottomSize:0,allSelected:!1,checked:!1,scroll:{},bindTarget:"wfl_todo_list_query",ds:this.$getDs("wfl_todo_list_query"),buttons:[{class:"button-refuse",text:this.$t("COMMON.REJECT"),callback:this.refuse},{class:"button-agree",text:this.$t("COMMON.AGREE"),callback:this.agree}],list:[{desc:"APP_LIST.PROCESSING",bindTarget:"wfl_todo_list_query"},{desc:"APP_LIST.PROCESSED",bindTarget:"wfl_done_list_query"}],options:{pullDownRefresh:{threshold:60,stop:40,txt:this.$t("COMMON.REFESHSUCCESSS")},pullUpLoad:{threshold:60,txt:this.$t("COMMON.LOADED")}}}},computed:{},methods:{agree:function(){var t=this;this.$createDialogDs({type:"prompt",title:this.$t("COMMON.AGREE"),id:"actionDs",onConfirm:function(){var e=t.$getDs("actionDs"),a={commentText:e.getCurrentRecord().get("commentText"),_status:"update",action:"AGREE"},o=t.ds.getRecordSelected(a);e.submit({approveList:o}).then(function(e){t.batchApprove(),t.$refs.view.query()},function(t){})},onCancel:function(){console.log("cancel")}}).show()},refuse:function(){var t=this;this.$createDialogDs({type:"prompt",title:this.$t("COMMON.AGREE"),id:"actionDs",onConfirm:function(){var e=t.$getDs("actionDs"),a={commentText:e.getCurrentRecord().get("commentText"),_status:"update",action:"REJECT"},o=t.ds.getRecordSelected(a);e.submit({approveList:o}).then(function(e){t.batchApprove(),t.$refs.view.query()},function(t){})},onCancel:function(){console.log("cancel")}}).show()},selected:function(t,e){"wfl_todo_list_query"===e.bindTarget?this.todoFlag=!0:(this.todoFlag=!1,this.bottomSize=0,this.hasFooter=!1,this.patchFlag=!0),this.bindTarget=e.bindTarget},selectAll:function(){this.allSelected=!this.allSelected,this.allSelected?this.ds.selectAll():this.ds.unselectAll()},batchApprove:function(){this.patchFlag=!this.patchFlag,!this.patchFlag&&this.$getDs("wfl_todo_list_query").getTotal()>0?(this.bottomSize=50,this.hasFooter=!0):(this.bottomSize=0,this.hasFooter=!1)},goBillDetail:function(t){console.log(t.get("insRecipientId")),this.hasFooter||this.$router.push({name:"approve-detail",params:{instanceId:t.get("instanceId"),insRecipientId:t.get("insRecipientId")}})},getStatusClass:function(t){return t.get("status")},getTemplateData:function(t){return{head:[{value:t.get("docNumber")},{value:t.get("applyDate")}],line:[{value:t.get("docCategoryName"),color:["line-imp","font-pingfang-bold"]},{value:"提单人：".concat(t.get("createdByName")?t.get("createdByName"):"")},{value:"备注："+t.get("instanceDesc")}],bottom:[{value:t.get("statusName")},{value:t.get("docAmount")}]}}}},n=i,u=(a("98ba"),a("2877")),d=Object(u["a"])(n,o,s,!1,null,"fdecfaca",null);e["default"]=d.exports},"693d":function(t,e,a){},"98ba":function(t,e,a){"use strict";var o=a("693d"),s=a.n(o);s.a}}]);